<!--
         Licensed to the Apache Software Foundation (ASF) under one$
         or more contributor license agreements.  See the NOTICE file$
         distributed with this work for additional information$
         regarding copyright ownership.  The ASF licenses this file$
         to you under the Apache License, Version 2.0 (the$
         "License"); you may not use this file except in compliance$
         with the License.  You may obtain a copy of the License at$
$
           http://www.apache.org/licenses/LICENSE-2.0$
$
         Unless required by applicable law or agreed to in writing,$
         software distributed under the License is distributed on an$
         "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY$
         KIND, either express or implied.  See the License for the$
         specific language governing permissions and limitations$
         under the License.$
-->
<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=320; user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Cordova Tests</title>
    <link rel="stylesheet" href="../master.css" type="text/css" media="screen" title="no title">
    <script type="text/javascript" charset="utf-8" src="../xface.js"></script>
    <script type="text/javascript" charset="utf-8" src="../main.js"></script>
    <script type="text/javascript">
      function scanZxingBar(){
        Zbar.start(success, fail);
      }

      function updateStatus(status){
        document.getElementById('status').innerText = status;
      }

      function updateBarcode(barcode){
        document.getElementById('barcode').innerText = barcode;
      }

      function success(barcode) {
        updateBarcode(barcode);
        updateStatus("success");
      }

      function fail(error) {
        updateStatus("fail to scanner barcode" );
      }
/*
      document.addEventListener("deviceready", function(){
        console.log('deviceready');
        var exec = cordova.require("cordova/exec");
        exec.setJsToNativeBridgeMode(exec.jsToNativeModes.JS_OBJECT);
        exec.setNativeToJsBridgeMode(exec.nativeToJsModes.LOAD_URL);
      }, false);
*/
    </script>
  </head>
  <body id="stage" class="theme">
    <h1>Zbar Test</h1>
    <div id="info">
        status: <span id="status"></span><br/>
        barcode: <span id="barcode"></span><br/>
    </div>
    <button class="btn large" onclick="scanZxingBar();">Scan barcode</button>

  </body>
</html>
